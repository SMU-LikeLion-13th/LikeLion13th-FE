<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      nav {
        position: static;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 1000;
        height: 50px;
        background-color: #ea00a4;
        color: white;
        display: flex;
        align-items: center;
        padding: 0 20px;
        margin-bottom: 70px;
        gap: 20px;
      }

      span {
        text-align: left;
        flex-direction: row;
        font-weight: bold;
        font-size: 15px;
      }

      ul {
        margin: 0;
        padding: 0;
        display: flex;
        list-style: none;
        gap: 5px;
        font-size: 13px;
      }

      @media (max-width: 600px) {
        nav ul li {
          padding: 10px;
          text-align: center;
        }
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: rgb(0, 0, 0);
        margin: 0;
        padding: 0;
      }

      h2 {
        margin-top: 150px;;
        text-align: center;
        color: #ea00a4;
        margin-bottom: 24px;
      }

      h3 {
        text-align: center;
        color: white;
        margin-bottom: 20px;
        font-weight: lighter;
        font-size: 15px;
      }

      hr {
        border: none;
        height: 1px;
        background-color: #620145;
        margin-top: 250px;
      }

      p {
        text-align: center;
        color: #919191;
        font-weight: lighter;
        font-size: 10px;
        margin-top: 10px;
      }

      #loadBtn {
        display: block;
        margin: 0 auto 40px auto;
        padding: 10px 24px;
        font-size: 16px;
        background-color: #ea00a4;
        color: white;
        border: none;
        border-radius:400px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      #loadBtn:hover {
        background-color: #b1007c;
      }

      .card-container {
        display: grid;
        grid-template-columns: repeat(6, 1fr);
        gap: 12px;
      }

      .card {
        border-radius: 16px;
        padding: 0;
        transition: transform 0.3s ease, box-shadow 0.2s ease;
        overflow: hidden; /*이게 모야*/
        position: relative;
      }

      .card:hover{
        transform: translateY(-8px);
      }

      .card img {
        width: 100%;
        aspect-ratio: 2/3;
        object-fit: cover;
        display: block;
        border-radius: 16px;
      }

      .card .overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.7);
        color: white;
        opacity: 0;
        transition: opacity 0.3s ease;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 10px;
        text-align: center;
      }

      .card:hover .overlay {
        opacity: 1;
      }

      .card .overlay h4 {
        font-size:14px;
        margin-bottom: 8px;
      }

      .card .overlay p {
        font-size: 12px;
        line-height: 1.4;
      }



  </style>
  </head>
  <body>
    <nav>
      <span id="home" style="cursor: pointer">😎 MOVIEEE</span>
      <ul class="menu">
        <li id="popular" style="cursor: pointer;">인기</li>
      </ul>
    </nav>
    

    <h2>당신의 다음 영화는?</h2>
    <h3>전 세계 인기 영화부터, 지금 놓치면 안 될 명작까지<br>감성적인 영화 탐험을 지금 시작하세요</br></h3>
    <button id="loadBtn">인기 영화 보러가기</button>
    <div class="card-container" id="cardContainer"></div>

    <script>
      //버튼 안 눌릴 때 DOMContentLoaded 사용
      document.addEventListener("DOMContentLoaded", () => {
        document.getElementById("home").addEventListener("click", ()=> {
          location.reload(); //홈 클릭 시 새로고침으로 초기화
        });
        document.getElementById("popular").addEventListener("click", loadPopularMovies);
        const apiKey = "5317c72646ca9337dc6d1e74095e4fc7";
        const loadBtn = document.getElementById("loadBtn");

        loadBtn.addEventListener("click", loadPopularMovies);

        function loadPopularMovies() {
          //fetch로 외부 데이터 가져오기
          fetch("https://api.themoviedb.org/3/movie/popular?api_key=5317c72646ca9337dc6d1e74095e4fc7&language=ko-KR&page=1")
            .then((res) => res.json()) //res=response
            .then((posts) => {
              //요소 숨기기
              document.querySelector("h1")?.remove();//혹시 있다면
              document.querySelector("h2")?.remove();
              loadBtn.remove();
              //h3도 제거 / forEach로 배열 안의 내용을 하나씩 처리
              document.querySelectorAll("h3").forEach(h3 => h3.remove());
              //왜 h3만 이렇게 지움? -> 코드 안에 여러개 있는 태그는 querySelector가 아닌 querySelectorAll로 NodeList 전체를 가져와서 반복해서 지워야함

              //인기 영화
              const headline = document.createElement("h2"); //createElement(): HTML 요소를 JS로 만듦
              headline.textContent = "인기 영화";
              headline.style.textAlign = "center";
              headline.style.color = "#ea00a4";
              headline.style.margin = "0 0 24px 0";

              const nav = document.querySelector("nav");
              nav.insertAdjacentElement("afterend", headline);

              //카드 생성
              const container = document.getElementById("cardContainer");
              container.innerHTML = ""; //혹시 기존 내용 있을 경우 초기화
              posts.results.forEach((movie) => {
                const card = document.createElement("div");
                card.className = "card";
                card.innerHTML = `
                    <img src="https://image.tmdb.org/t/p/w500${movie.poster_path}" alt="${movie.title}" />
                    <div class="overlay">
                      <h4>${movie.title}</h4>
                      <p>⭐ ${movie.vote_average}</p>
                      <p>📅 ${movie.release_date} 개봉</p>
                    </div>
                `;
                container.appendChild(card);
              });
            });
        }
      });
    
        
    </script>
    <hr />
    <p>© 2025 나현의 영화 서비스 All rights reserved.</p>
  </body>
</html>
